<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>GitHub Traffic Monitor</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
        <script>document.documentElement.setAttribute('data-theme', localStorage.getItem('theme') || 'dark');</script>
        <link rel="stylesheet" href="/static/style.css">
    </head>
    <body>
        <div class="container">
            <h1>GitHub Traffic Dashboard</h1>

            <div class="card">
                <select id="repo" onchange="loadData()">
                    {% for r in repos %}
                    <option value="{{r}}">{{r}}</option>
                    {% endfor %}
                </select>

                <input type="date" id="start">
                <input type="date" id="end">

                <button onclick="preset(7)">7d</button>
                <button onclick="preset(14)">14d</button>
                <button onclick="preset(30)">30d</button>
                <button onclick="presetMonth()">This Month</button>
                <button onclick="presetYear()">This Year</button>

                <button onclick="exportPDF()">Export PDF</button>

                <button onclick="toggleTheme()" style="float:right">ðŸŒ™</button>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>Clone</h3>
                    <div class="charts">
                        <canvas id="clonesChart" style="max-height:300px;"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3>Views</h3>
                    <div class="charts">
                        <canvas id="viewsChart" style="max-height:300px;"></canvas>
                    </div>
                </div>
            </div>

            <div class="grid-2"></div>
                <div class="card">
                    <h3>Top Referrers</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Referrer</th>
                                    <th>Views</th>
                                </tr>
                            </thead>
                            <tbody id="referrers"></tbody>
                        </table>
                </div>
                <div class="card">
                    <h3>Popular Paths</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Path</th>
                                    <th>Views</th>
                                </tr>
                            </thead>
                            <tbody id="paths"></tbody>
                        </table>
                </div>

            </div>

        </div>
        <script src="/static/function.js"></script>
    </body>
</html>